(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{L6id:function(n,l,t){"use strict";t.r(l);var e=t("8Y7J");class o{}var i=t("pMnS"),r=t("oBZk"),a=t("ZZ/e"),u=t("iInd"),c=t("SVse"),s=t("s7LF"),b=t("mrSG"),d=t("EnSQ"),g=t("+tLe");class h{constructor(n,l,t,e){this.http=n,this.dataService=l,this.alertController=t,this.modalController=e}ngOnInit(){this.showSpinner=!0,this.isRecording=this.dataService.getIsRecording(),this.camList=["Microsoft LifeCam Cinema","Microsoft LifeCam HD-5000","Microsoft LifeCam VX-700","Microsoft LifeCam Studio","Microsoft LifeCam HD-3000","Logitech Webcam C200","Logitech Webcam C210","Logitech Webcam C250","Logitech Webcam HD C270","Logitech Webcam HD C310","Logitech Webcam C600","Logitech Webcam HD C525","Logitech Webcam HD C615","Logitech Webcam C905","Logitech Webcam HD C910","Logitech Webcam HD C920","Logitech Quickcam Pro 5000","Logitech Quickcam Pro 9000"]}ionViewWillEnter(){this.dataService.retrieveSettingsDataFromDB().subscribe(n=>{this.camera=n.camera,this.dataService.setData(n),"ON"===n.recordingState?(this.isRecording=!0,this.dataService.setIsRecording(!0)):(this.isRecording=!1,this.dataService.setIsRecording(!1)),this.camImage=this.setCameraImage(this.isRecording),this.dataService.getErrorLogfromDB().subscribe(n=>{this.dataService.setErrorLog(n),this.showSpinner=!1}),this.dataService.retrieveCamDataFromDB(this.camera)})}startRecording(){const{IPAddress:n,NodePort:l}=this.dataService.getConfigData();this.isRecording=!0,this.dataService.setIsRecording(!0),this.camImage=`assets/CamOn/${this.camera}-on.png`,this.http.get(`http://${n}:${l}/livestream/startRecording`).subscribe()}stopRecording(){const{IPAddress:n,NodePort:l}=this.dataService.getConfigData();this.isRecording=!1,this.dataService.setIsRecording(!1),this.camImage=`assets/CamOff/${this.camera}-off.png`,this.http.get(`http://${n}:${l}/livestream/stopRecording`).subscribe()}getErrorLog(){const{IPAddress:n,NodePort:l}=this.dataService.getConfigData();this.http.get(`http://${n}:${l}/app-settings/errorlog/data/all`).subscribe(n=>{console.log(n)})}showErrorLog(){return b.b(this,void 0,void 0,(function*(){const n=yield this.modalController.create({component:g.a,cssClass:"my-modal"});return yield n.present()}))}setCameraImage(n){return this.isRecording?`assets/CamOn/${this.camera}-on.png`:`assets/CamOff/${this.camera}-off.png`}selectionChange(){this.camImage=this.setCameraImage(this.isRecording),this.dataService.updateCamera(this.camera),this.showSpinner||this.dataService.retrieveCamDataFromDB(this.camera)}startStreamServer(){if(this.isRecording){const{IPAddress:n,NodePort:l}=this.dataService.getConfigData();this.http.get(`http://${n}:${l}/livestream/start`).subscribe()}}shutDownConfirm(){return b.b(this,void 0,void 0,(function*(){const n=yield this.alertController.create({header:"Warning",message:"RaspberryPi will shutdown. Are you sure?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Shutdown",handler:()=>{this.shutDown()}}]});yield n.present()}))}shutDown(){const{IPAddress:n,NodePort:l}=this.dataService.getConfigData();this.http.get(`http://${n}:${l}/videos/shutdown`).subscribe()}}var m=t("IheW"),p=e.pb({encapsulation:0,styles:[[".header[_ngcontent-%COMP%]{--ion-color-primary:#353d55;--border-color:#222;--border-width:1px 0px;--border-style:solid}ion-header[_ngcontent-%COMP%]::after{background-image:none}.page-title[_ngcontent-%COMP%]{font-size:20px;color:#fcfcfc}.buttonContainer[_ngcontent-%COMP%]{border-bottom:1px;border-top:0;border-left:0;border-right:0;border-color:#b1b1b1;border-style:solid}.buttonContainer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;display:block;text-align:center;--background:#fff;--color:#000;--border-width:0.5px 0px 0px 0px;--border-color:rgb(177, 177, 177);--background-hover:rgb(212, 225, 238);--background-activated:rgb(212, 225, 238);--border-style:solid;--border-radius:0px;margin:0 auto}ion-button[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.shutdown-button[_ngcontent-%COMP%]{width:100%;display:block;text-align:center;--background:rgba(253, 56, 56, 0.747);--color:#000;--border-width:0.5px 0px 0px 0px;--border-color:rgb(177, 177, 177);--background-hover:rgb(255, 162, 162);--background-activated:rgb(212, 225, 238);--border-style:solid;--border-radius:0px;margin:0 auto}.buttonContainer[_ngcontent-%COMP%]   ion-button.button-disabled[_ngcontent-%COMP%]{--background:#ddd;--color:#6f6f6f}ion-content[_ngcontent-%COMP%]{--ion-background-color:#fff;width:100%!important;padding-top:10px}ion-item[_ngcontent-%COMP%]{width:100%;display:block;margin-left:auto;margin-right:auto;display:-webkit-box;display:flex;--background-color:#fff}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{min-width:25%;--background-color:transparent}ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{min-width:75%;text-align:right;--background-color:transparent;font-size:15px}.alert-radio-label[_ngcontent-%COMP%]{text-align:center}.image[_ngcontent-%COMP%]{width:100%;min-height:200px;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}ion-img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-bottom:10px;width:auto;height:auto}"]],data:{}});function f(n){return e.Ib(0,[(n()(),e.rb(0,0,null,null,2,"ion-select-option",[],null,null,null,r.M,r.q)),e.qb(1,49152,null,0,a.ob,[e.h,e.k,e.x],{value:[0,"value"]},null),(n()(),e.Hb(2,0,["",""]))],(function(n,l){n(l,1,0,e.vb(1,"",l.context.$implicit,""))}),(function(n,l){n(l,2,0,l.context.$implicit)}))}function C(n){return e.Ib(0,[(n()(),e.rb(0,0,null,null,1,"ion-spinner",[],null,null,null,r.O,r.r)),e.qb(1,49152,null,0,a.sb,[e.h,e.k,e.x],null,null)],null,null)}function k(n){return e.Ib(0,[(n()(),e.rb(0,0,null,null,1,"ion-img",[],null,null,null,r.G,r.j)),e.qb(1,49152,null,0,a.D,[e.h,e.k,e.x],{src:[0,"src"]},null)],(function(n,l){n(l,1,0,l.component.camImage)}),null)}function v(n){return e.Ib(0,[(n()(),e.rb(0,0,null,null,6,"ion-header",[],null,null,null,r.E,r.h)),e.qb(1,49152,null,0,a.B,[e.h,e.k,e.x],null,null),(n()(),e.rb(2,0,null,0,4,"ion-toolbar",[["class","header"],["color","primary"],["mode","ios"]],null,null,null,r.S,r.v)),e.qb(3,49152,null,0,a.Cb,[e.h,e.k,e.x],{color:[0,"color"],mode:[1,"mode"]},null),(n()(),e.rb(4,0,null,0,2,"ion-title",[["class","ion-text-center page-title"]],null,null,null,r.Q,r.t)),e.qb(5,49152,null,0,a.Ab,[e.h,e.k,e.x],null,null),(n()(),e.Hb(-1,0,[" Pi Dashcam "])),(n()(),e.rb(7,0,null,null,45,"ion-content",[],null,null,null,r.C,r.f)),e.qb(8,49152,null,0,a.u,[e.h,e.k,e.x],null,null),(n()(),e.rb(9,0,null,0,0,"div",[["style","height: 20px;"]],null,null,null,null,null)),(n()(),e.rb(10,0,null,0,19,"div",[["class","buttonContainer"]],null,null,null,null,null)),(n()(),e.rb(11,0,null,null,4,"ion-button",[["mode","ios"],["routerDirection","forward"],["routerLink","/video-list"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==e.Db(n,13).onClick()&&o),"click"===l&&(o=!1!==e.Db(n,14).onClick(t)&&o),o}),r.z,r.c)),e.qb(12,49152,null,0,a.k,[e.h,e.k,e.x],{mode:[0,"mode"],routerDirection:[1,"routerDirection"]},null),e.qb(13,16384,null,0,u.n,[u.m,u.a,[8,null],e.B,e.k],{routerLink:[0,"routerLink"]},null),e.qb(14,737280,null,0,a.Kb,[c.g,a.Hb,e.k,u.m,[2,u.n]],{routerDirection:[0,"routerDirection"]},null),(n()(),e.Hb(-1,0,[" View Videos "])),(n()(),e.rb(16,0,null,null,4,"ion-button",[["mode","ios"],["routerDirection","forward"],["routerLink","/live-stream"]],null,[[null,"click"]],(function(n,l,t){var o=!0,i=n.component;return"click"===l&&(o=!1!==e.Db(n,18).onClick()&&o),"click"===l&&(o=!1!==e.Db(n,19).onClick(t)&&o),"click"===l&&(o=!1!==i.startStreamServer()&&o),o}),r.z,r.c)),e.qb(17,49152,null,0,a.k,[e.h,e.k,e.x],{mode:[0,"mode"],routerDirection:[1,"routerDirection"]},null),e.qb(18,16384,null,0,u.n,[u.m,u.a,[8,null],e.B,e.k],{routerLink:[0,"routerLink"]},null),e.qb(19,737280,null,0,a.Kb,[c.g,a.Hb,e.k,u.m,[2,u.n]],{routerDirection:[0,"routerDirection"]},null),(n()(),e.Hb(-1,0,[" View Livestream "])),(n()(),e.rb(21,0,null,null,2,"ion-button",[["mode","ios"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.startRecording()&&e),e}),r.z,r.c)),e.qb(22,49152,null,0,a.k,[e.h,e.k,e.x],{disabled:[0,"disabled"],mode:[1,"mode"]},null),(n()(),e.Hb(-1,0,[" Start Recording "])),(n()(),e.rb(24,0,null,null,2,"ion-button",[["mode","ios"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.stopRecording()&&e),e}),r.z,r.c)),e.qb(25,49152,null,0,a.k,[e.h,e.k,e.x],{disabled:[0,"disabled"],mode:[1,"mode"]},null),(n()(),e.Hb(-1,0,[" Stop Recording "])),(n()(),e.rb(27,0,null,null,2,"ion-button",[["mode","ios"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.showErrorLog()&&e),e}),r.z,r.c)),e.qb(28,49152,null,0,a.k,[e.h,e.k,e.x],{mode:[0,"mode"]},null),(n()(),e.Hb(-1,0,[" Error Log "])),(n()(),e.rb(30,0,null,0,14,"div",[["class","button"],["style","padding-left: 2px;"]],null,null,null,null,null)),(n()(),e.rb(31,0,null,null,13,"ion-item",[],null,null,null,r.I,r.l)),e.qb(32,49152,null,0,a.H,[e.h,e.k,e.x],null,null),(n()(),e.rb(33,0,null,0,2,"ion-label",[["va",""]],null,null,null,r.J,r.m)),e.qb(34,49152,null,0,a.N,[e.h,e.k,e.x],null,null),(n()(),e.Hb(-1,0,["Webcam"])),(n()(),e.rb(36,0,null,0,8,"ion-select",[["mode","ios"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],(function(n,l,t){var o=!0,i=n.component;return"ionBlur"===l&&(o=!1!==e.Db(n,37)._handleBlurEvent(t.target)&&o),"ionChange"===l&&(o=!1!==e.Db(n,37)._handleChangeEvent(t.target)&&o),"ngModelChange"===l&&(o=!1!==(i.camera=t)&&o),"ionChange"===l&&(o=!1!==i.selectionChange()&&o),o}),r.N,r.p)),e.qb(37,16384,null,0,a.Lb,[e.k],null,null),e.Eb(1024,null,s.b,(function(n){return[n]}),[a.Lb]),e.qb(39,671744,null,0,s.e,[[8,null],[8,null],[8,null],[6,s.b]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,s.c,null,[s.e]),e.qb(41,16384,null,0,s.d,[[4,s.c]],null,null),e.qb(42,49152,null,0,a.nb,[e.h,e.k,e.x],{disabled:[0,"disabled"],mode:[1,"mode"]},null),(n()(),e.gb(16777216,null,0,1,null,f)),e.qb(44,278528,null,0,c.h,[e.M,e.J,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(45,0,null,0,4,"div",[["class","image"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,C)),e.qb(47,16384,null,0,c.i,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(n()(),e.gb(16777216,null,null,1,null,k)),e.qb(49,16384,null,0,c.i,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(50,0,null,0,2,"ion-button",[["class","shutdown-button"],["mode","ios"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.shutDownConfirm()&&e),e}),r.z,r.c)),e.qb(51,49152,null,0,a.k,[e.h,e.k,e.x],{mode:[0,"mode"]},null),(n()(),e.Hb(-1,0,[" Shutdown "]))],(function(n,l){var t=l.component;n(l,3,0,"primary","ios"),n(l,12,0,"ios","forward"),n(l,13,0,"/video-list"),n(l,14,0,"forward"),n(l,17,0,"ios","forward"),n(l,18,0,"/live-stream"),n(l,19,0,"forward"),n(l,22,0,t.isRecording,"ios"),n(l,25,0,!t.isRecording,"ios"),n(l,28,0,"ios"),n(l,39,0,e.vb(1,"",t.isRecording,""),t.camera),n(l,42,0,e.vb(1,"",t.isRecording,""),"ios"),n(l,44,0,t.camList),n(l,47,0,t.showSpinner),n(l,49,0,!t.showSpinner),n(l,51,0,"ios")}),(function(n,l){n(l,36,0,e.Db(l,41).ngClassUntouched,e.Db(l,41).ngClassTouched,e.Db(l,41).ngClassPristine,e.Db(l,41).ngClassDirty,e.Db(l,41).ngClassValid,e.Db(l,41).ngClassInvalid,e.Db(l,41).ngClassPending)}))}function x(n){return e.Ib(0,[(n()(),e.rb(0,0,null,null,1,"app-home",[],null,null,null,v,p)),e.qb(1,114688,null,0,h,[m.c,d.a,a.a,a.Gb],null,null)],(function(n,l){n(l,1,0)}),null)}var D=e.nb("app-home",h,x,{},{},[]);t.d(l,"HomePageModuleNgFactory",(function(){return w}));var w=e.ob(o,[],(function(n){return e.Ab([e.Bb(512,e.j,e.Z,[[8,[i.a,D]],[3,e.j],e.v]),e.Bb(4608,c.k,c.j,[e.s,[2,c.q]]),e.Bb(4608,s.g,s.g,[]),e.Bb(4608,a.b,a.b,[e.x,e.g]),e.Bb(4608,a.Gb,a.Gb,[a.b,e.j,e.p]),e.Bb(4608,a.Jb,a.Jb,[a.b,e.j,e.p]),e.Bb(1073742336,c.b,c.b,[]),e.Bb(1073742336,s.f,s.f,[]),e.Bb(1073742336,s.a,s.a,[]),e.Bb(1073742336,a.Eb,a.Eb,[]),e.Bb(1073742336,u.o,u.o,[[2,u.t],[2,u.m]]),e.Bb(1073742336,o,o,[]),e.Bb(1024,u.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);